<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø­Ø³Ø§Ø¨ÙŠ - Slyvie in bloom</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --brand-primary: #8b2623;
        --brand-cream: #fdfcf3;
        --brand-dark: #6b1e1b;
        --brand-light: #a5312e;
        --brand-accent: rgba(139, 38, 35, 0.1);
        --success-color: #22c55e;
        --warning-color: #f59e0b;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans Arabic", "Inter", sans-serif;
        background: linear-gradient(135deg, var(--brand-cream), #fff7ed);
        color: var(--brand-primary);
        line-height: 1.6;
        direction: rtl;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 16px;
      }

      .header {
        background: rgba(253, 252, 243, 0.95);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid var(--brand-accent);
        padding: 16px 0;
        margin-bottom: 40px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        color: var(--brand-primary);
        justify-content: center;
      }

      .logo img {
        width: 32px;
        height: 32px;
        object-fit: contain;
      }

      .logo-text {
        font-size: 20px;
        font-weight: 600;
        font-family: "Playfair Display", serif;
      }

      .auth-container {
        max-width: 500px;
        margin: 0 auto;
        padding: 40px;
      }

      .auth-card {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 10px 40px rgba(139, 38, 35, 0.15);
        border: 1px solid var(--brand-accent);
      }

      .auth-header {
        text-align: center;
        margin-bottom: 32px;
      }

      .auth-title {
        font-size: 2rem;
        font-family: "Playfair Display", serif;
        color: var(--brand-primary);
        margin-bottom: 8px;
      }

      .auth-subtitle {
        color: rgba(139, 38, 35, 0.7);
        font-size: 16px;
      }

      .auth-tabs {
        display: flex;
        background: var(--brand-accent);
        border-radius: 50px;
        padding: 4px;
        margin-bottom: 32px;
      }

      .auth-tab {
        flex: 1;
        padding: 12px 24px;
        text-align: center;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 500;
        border: none;
        background: transparent;
        color: var(--brand-primary);
      }

      .auth-tab.active {
        background: var(--brand-primary);
        color: var(--brand-cream);
      }

      .auth-form {
        display: grid;
        gap: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .form-label {
        font-weight: 600;
        color: var(--brand-primary);
      }

      .form-input {
        padding: 16px;
        border: 2px solid var(--brand-accent);
        border-radius: 12px;
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s;
        background: var(--brand-cream);
      }

      .form-input:focus {
        outline: none;
        border-color: var(--brand-primary);
        box-shadow: 0 0 0 3px rgba(139, 38, 35, 0.1);
      }

      .btn {
        padding: 16px 32px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 16px;
        transition: all 0.3s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .btn-primary {
        background: var(--brand-primary);
        color: var(--brand-cream);
      }

      .btn-primary:hover {
        background: var(--brand-dark);
        transform: translateY(-2px);
      }

      .btn-outline {
        background: transparent;
        color: var(--brand-primary);
        border: 2px solid var(--brand-primary);
      }

      .btn-outline:hover {
        background: var(--brand-primary);
        color: var(--brand-cream);
      }

      .divider {
        display: flex;
        align-items: center;
        gap: 16px;
        margin: 24px 0;
        color: rgba(139, 38, 35, 0.6);
      }

      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--brand-accent);
      }

      .social-login {
        display: grid;
        gap: 12px;
      }

      .social-btn {
        padding: 16px;
        border: 2px solid var(--brand-accent);
        border-radius: 12px;
        background: white;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        font-weight: 500;
        color: var(--brand-primary);
      }

      .social-btn:hover {
        border-color: var(--brand-primary);
        transform: translateY(-2px);
      }

      .customer-dashboard {
        display: none;
        grid-template-columns: 250px 1fr;
        gap: 32px;
        max-width: 1000px;
        margin: 0 auto;
      }

      .sidebar {
        background: white;
        border-radius: 16px;
        padding: 24px;
        height: fit-content;
        box-shadow: 0 4px 12px rgba(139, 38, 35, 0.1);
      }

      .sidebar-menu {
        list-style: none;
        display: grid;
        gap: 8px;
      }

      .sidebar-menu li {
        padding: 12px 16px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 500;
      }

      .sidebar-menu li:hover,
      .sidebar-menu li.active {
        background: var(--brand-accent);
        color: var(--brand-primary);
      }

      .dashboard-content {
        background: white;
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 4px 12px rgba(139, 38, 35, 0.1);
      }

      .welcome-section {
        text-align: center;
        padding: 40px;
        background: var(--brand-accent);
        border-radius: 16px;
        margin-bottom: 32px;
      }

      .welcome-title {
        font-size: 1.5rem;
        color: var(--brand-primary);
        margin-bottom: 8px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 32px;
      }

      .stat-card {
        background: var(--brand-cream);
        padding: 24px;
        border-radius: 12px;
        text-align: center;
        border: 1px solid var(--brand-accent);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--brand-primary);
        margin-bottom: 8px;
      }

      .stat-label {
        color: rgba(139, 38, 35, 0.7);
        font-size: 14px;
      }

      .orders-list {
        display: grid;
        gap: 16px;
      }

      .order-item {
        border: 1px solid var(--brand-accent);
        border-radius: 12px;
        padding: 20px;
        transition: all 0.3s;
      }

      .order-item:hover {
        box-shadow: 0 4px 12px rgba(139, 38, 35, 0.1);
      }

      .order-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .order-number {
        font-weight: 700;
        color: var(--brand-primary);
      }

      .order-status {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        background: var(--success-color);
        color: white;
      }

      .message {
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
        font-weight: 500;
      }

      .message.success {
        background: #dcfce7;
        color: #166534;
        border: 1px solid var(--success-color);
      }

      .message.error {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #ef4444;
      }

      .hidden {
        display: none;
      }

      @media (max-width: 768px) {
        .auth-container {
          padding: 20px;
        }

        .auth-card {
          padding: 24px;
        }

        .customer-dashboard {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .auth-tabs {
          flex-direction: column;
          gap: 8px;
          background: none;
        }

        .auth-tab {
          border: 2px solid var(--brand-accent);
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <div class="container">
        <a href="index.html" class="logo">
          <img
            src="https://cdn.builder.io/api/v1/image/assets%2F13e11346f6ee4de6b150f7304f4e7aca%2Fd6d5745669d541e0b6da8b0f22033c5a?format=webp&width=800"
            alt="Slyvie in bloom logo"
          />
          <span class="logo-text">Slyvie in bloom</span>
        </a>
      </div>
    </div>

    <!-- Auth Container -->
    <div class="auth-container" id="authContainer">
      <div class="auth-card">
        <div class="auth-header">
          <h1 class="auth-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸŒ¸</h1>
          <p class="auth-subtitle">Ø³Ø¬Ù„ÙŠ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø·Ù„Ø¨Ø§ØªÙƒ ÙˆØ­ÙØ¸ Ù…Ø¹Ù„ï¿½ï¿½Ù…Ø§ØªÙƒ</p>
        </div>

        <!-- Auth Tabs -->
        <div class="auth-tabs">
          <button class="auth-tab active" onclick="showTab('login')">
            ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
          </button>
          <button class="auth-tab" onclick="showTab('register')">
            Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
          </button>
        </div>

        <!-- Messages -->
        <div id="messageContainer"></div>

        <!-- Login Form -->
        <form id="loginForm" class="auth-form">
          <div class="form-group">
            <label class="form-label" for="loginPhone">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <input
              type="tel"
              id="loginPhone"
              class="form-input"
              placeholder="05xxxxxxxx"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="loginPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input
              type="password"
              id="loginPassword"
              class="form-input"
              placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary">ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        </form>

        <!-- Register Form -->
        <form id="registerForm" class="auth-form hidden">
          <div class="form-group">
            <label class="form-label" for="registerName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input
              type="text"
              id="registerName"
              class="form-input"
              placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="registerPhone">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
            <input
              type="tel"
              id="registerPhone"
              class="form-input"
              placeholder="05xxxxxxxx"
              required
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="registerEmail"
              >Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label
            >
            <input
              type="email"
              id="registerEmail"
              class="form-input"
              placeholder="example@email.com"
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="registerPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
            <input
              type="password"
              id="registerPassword"
              class="form-input"
              placeholder="Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary">
            âœ¨ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
          </button>
        </form>

        <div class="divider">Ø£Ùˆ</div>

        <!-- Social Login -->
        <div class="social-login">
          <button class="social-btn" onclick="quickLogin()">
            ğŸ“± Ø¯Ø®ÙˆÙ„ Ø³Ø±ÙŠØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
          </button>
          <a href="index.html" class="btn btn-outline">
            ğŸ›ï¸ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„
          </a>
        </div>
      </div>
    </div>

    <!-- Customer Dashboard -->
    <div class="customer-dashboard" id="customerDashboard">
      <div class="sidebar">
        <ul class="sidebar-menu">
          <li class="active" onclick="showSection('overview')">ğŸ“Š Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</li>
          <li onclick="showSection('orders')">ğŸ›ï¸ Ø·Ù„Ø¨Ø§ØªÙŠ</li>
          <li onclick="showSection('profile')">ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©</li>
          <li onclick="showSection('addresses')">ğŸ“ Ø¹Ù†Ø§ÙˆÙŠÙ†ÙŠ</li>
          <li onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</li>
        </ul>
      </div>

      <div class="dashboard-content">
        <!-- Overview Section -->
        <div id="overviewSection">
          <div class="welcome-section">
            <h2 class="welcome-title">
              Ù…Ø±Ø­Ø¨Ø§Ù‹ <span id="customerName"></span> ğŸŒ¸
            </h2>
            <p>Ù†Ø­Ù† Ø³Ø¹Ø¯Ø§Ø¡ Ø¨ÙˆØ¬ÙˆØ¯Ùƒ Ù…Ø¹Ù†Ø§ ÙÙŠ Ù…ØªØ¬Ø± Ø³Ù„ÙŠÙÙŠ Ø¥Ù† Ø¨Ù„ÙˆÙ…</p>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number" id="totalOrders">0</div>
              <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="totalSpent">0</div>
              <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (Ø±ÙŠØ§Ù„)</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="pendingOrders">0</div>
              <div class="stat-label">Ø·Ù„Ø¨Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="completedOrders">0</div>
              <div class="stat-label">Ø·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</div>
            </div>
          </div>
        </div>

        <!-- Orders Section -->
        <div id="ordersSection" class="hidden">
          <h2 style="margin-bottom: 24px; color: var(--brand-primary)">
            ğŸ›ï¸ Ø·Ù„Ø¨Ø§ØªÙŠ
          </h2>
          <div class="orders-list" id="customerOrdersList">
            <!-- Orders will be populated by JavaScript -->
          </div>
        </div>

        <!-- Profile Section -->
        <div id="profileSection" class="hidden">
          <h2 style="margin-bottom: 24px; color: var(--brand-primary)">
            ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©
          </h2>
          <form class="auth-form" id="profileForm">
            <div class="form-group">
              <label class="form-label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
              <input type="text" id="profileName" class="form-input" />
            </div>
            <div class="form-group">
              <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
              <input type="tel" id="profilePhone" class="form-input" readonly />
            </div>
            <div class="form-group">
              <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
              <input type="email" id="profileEmail" class="form-input" />
            </div>
            <button type="submit" class="btn btn-primary">
              ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
            </button>
          </form>
        </div>

        <!-- Addresses Section -->
        <div id="addressesSection" class="hidden">
          <h2 style="margin-bottom: 24px; color: var(--brand-primary)">
            ğŸ“ Ø¹Ù†Ø§ÙˆÙŠÙ†ÙŠ
          </h2>
          <div id="addressesList">
            <!-- Addresses will be populated by JavaScript -->
          </div>
          <button class="btn btn-outline" onclick="addNewAddress()">
            â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯
          </button>
        </div>
      </div>
    </div>

    <script>
      // Customer data management
      let currentCustomer = JSON.parse(
        localStorage.getItem("currentCustomer") || "null",
      );
      let customers = JSON.parse(localStorage.getItem("customers") || "{}");
      let orders = JSON.parse(localStorage.getItem("orders") || "[]");

      // Check if customer is already logged in
      if (currentCustomer) {
        showDashboard();
      }

      function showMessage(message, type = "success") {
        const container = document.getElementById("messageContainer");
        container.innerHTML = `<div class="message ${type}">${message}</div>`;
        setTimeout(() => {
          container.innerHTML = "";
        }, 5000);
      }

      function showTab(tab) {
        // Update tab buttons
        document.querySelectorAll(".auth-tab").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        // Show/hide forms
        if (tab === "login") {
          document.getElementById("loginForm").classList.remove("hidden");
          document.getElementById("registerForm").classList.add("hidden");
        } else {
          document.getElementById("loginForm").classList.add("hidden");
          document.getElementById("registerForm").classList.remove("hidden");
        }
      }

      function register(name, phone, email, password) {
        // Check if customer already exists
        if (customers[phone]) {
          showMessage("Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.", "error");
          return false;
        }

        // Create new customer
        const customer = {
          name,
          phone,
          email,
          password,
          joinDate: new Date().toISOString(),
          addresses: [],
        };

        customers[phone] = customer;
        localStorage.setItem("customers", JSON.stringify(customers));
        showMessage("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰");
        return true;
      }

      function login(phone, password) {
        const customer = customers[phone];
        if (!customer) {
          showMessage("Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ØºÙŠØ± Ù…Ø³Ø¬Ù„. ÙŠØ±Ø¬Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯.", "error");
          return false;
        }

        if (customer.password !== password) {
          showMessage("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.", "error");
          return false;
        }

        currentCustomer = customer;
        localStorage.setItem("currentCustomer", JSON.stringify(customer));
        showMessage("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸŒ¸");
        setTimeout(showDashboard, 1500);
        return true;
      }

      // Admin login function
      function adminLogin(email, password) {
        if (email === "slyvieinbloom@gmail.com") {
          // Store admin session
          localStorage.setItem(
            "adminSession",
            JSON.stringify({
              email: email,
              loginTime: new Date().toISOString(),
              isAdmin: true,
            }),
          );

          showMessage("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©! ğŸ‘‘", "success");
          setTimeout(() => {
            window.location.href = "admin-dashboard.html";
          }, 1500);
          return true;
        } else {
          showMessage("Ù‡Ø°Ø§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ØºÙŠØ± Ù…Ø®ÙˆÙ„ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù„ï¿½ï¿½Ø¥Ø¯Ø§Ø±Ø©", "error");
          return false;
        }
      }

      function quickLogin() {
        const phone = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„Ùƒ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹:");
        if (phone) {
          if (customers[phone]) {
            currentCustomer = customers[phone];
            localStorage.setItem(
              "currentCustomer",
              JSON.stringify(customers[phone]),
            );
            showDashboard();
          } else {
            const name = prompt("ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯! Ù…Ø§ Ø§Ø³Ù…ÙƒØŸ");
            if (name) {
              const newCustomer = {
                name,
                phone,
                email: "",
                password: "quicklogin",
                joinDate: new Date().toISOString(),
                addresses: [],
              };
              customers[phone] = newCustomer;
              currentCustomer = newCustomer;
              localStorage.setItem("customers", JSON.stringify(customers));
              localStorage.setItem(
                "currentCustomer",
                JSON.stringify(newCustomer),
              );
              showDashboard();
            }
          }
        }
      }

      function logout() {
        currentCustomer = null;
        localStorage.removeItem("currentCustomer");
        document.getElementById("authContainer").style.display = "block";
        document.getElementById("customerDashboard").style.display = "none";
        showMessage("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­");
      }

      function showDashboard() {
        document.getElementById("authContainer").style.display = "none";
        document.getElementById("customerDashboard").style.display = "grid";

        // Update customer info
        document.getElementById("customerName").textContent =
          currentCustomer.name;
        document.getElementById("profileName").value = currentCustomer.name;
        document.getElementById("profilePhone").value = currentCustomer.phone;
        document.getElementById("profileEmail").value =
          currentCustomer.email || "";

        // Load customer stats
        loadCustomerStats();
        loadCustomerOrders();
      }

      function loadCustomerStats() {
        const customerOrders = orders.filter(
          (order) => order.customer.phone === currentCustomer.phone,
        );

        const totalOrders = customerOrders.length;
        const totalSpent = customerOrders.reduce(
          (sum, order) => sum + (order.total || 0),
          0,
        );
        const pendingOrders = customerOrders.filter(
          (order) => order.status === "pending" || order.status === "confirmed",
        ).length;
        const completedOrders = customerOrders.filter(
          (order) => order.status === "completed",
        ).length;

        document.getElementById("totalOrders").textContent = totalOrders;
        document.getElementById("totalSpent").textContent = totalSpent;
        document.getElementById("pendingOrders").textContent = pendingOrders;
        document.getElementById("completedOrders").textContent =
          completedOrders;
      }

      function loadCustomerOrders() {
        const customerOrders = orders.filter(
          (order) => order.customer.phone === currentCustomer.phone,
        );

        const ordersList = document.getElementById("customerOrdersList");

        if (customerOrders.length === 0) {
          ordersList.innerHTML = `
            <div style="text-align: center; padding: 40px; color: rgba(139, 38, 35, 0.6);">
              <h3 style="margin-bottom: 16px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø¹Ø¯</h3>
              <p>Ø§Ø¨Ø¯Ø¦ÙŠ ØªØ³ÙˆÙ‚Ùƒ Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ…ØªØ¹ÙŠ Ø¨Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©!</p>
              <a href="index.html" class="btn btn-primary" style="margin-top: 16px;">ğŸ›ï¸ Ø§Ø¨Ø¯Ø¦ÙŠ Ø§Ù„ØªØ³ÙˆÙ‚</a>
            </div>
          `;
          return;
        }

        ordersList.innerHTML = customerOrders
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .map(
            (order) => `
          <div class="order-item">
            <div class="order-header">
              <span class="order-number">#${order.orderNumber}</span>
              <span class="order-status">${getStatusText(order.status)}</span>
            </div>
            <div style="display: grid; gap: 8px; margin-bottom: 16px;">
              <div><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${order.date}</div>
              <div><strong>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> ${order.items.map((item) => `${item.name} (${item.quantity})`).join(", ")}</div>
              <div><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</strong> ${order.total} Ø±ÙŠØ§Ù„</div>
            </div>
            <button class="btn btn-outline" onclick="contactAboutOrder('${order.orderNumber}')">
              ğŸ“± Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨
            </button>
          </div>
        `,
          )
          .join("");
      }

      function getStatusText(status) {
        const statusMap = {
          pending: "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
          confirmed: "Ù…Ø¤ÙƒØ¯",
          preparing: "Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",
          shipped: "ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ",
          completed: "Ù…ÙƒØªÙ…Ù„",
        };
        return statusMap[status] || status;
      }

      function showSection(section) {
        // Update sidebar
        document.querySelectorAll(".sidebar-menu li").forEach((item) => {
          item.classList.remove("active");
        });
        event.target.classList.add("active");

        // Show/hide sections
        document.querySelectorAll("[id$='Section']").forEach((sec) => {
          sec.classList.add("hidden");
        });
        document.getElementById(section + "Section").classList.remove("hidden");
      }

      function contactAboutOrder(orderNumber) {
        const message = encodeURIComponent(
          `Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø·Ù„Ø¨ÙŠ Ø±Ù‚Ù… ${orderNumber} ğŸŒ¸`,
        );
        window.open(`https://wa.me/966501234567?text=${message}`, "_blank");
      }

      // Form handlers
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const phone = document.getElementById("loginPhone").value;
          const password = document.getElementById("loginPassword").value;
          login(phone, password);
        });

      document
        .getElementById("registerForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const name = document.getElementById("registerName").value;
          const phone = document.getElementById("registerPhone").value;
          const email = document.getElementById("registerEmail").value;
          const password = document.getElementById("registerPassword").value;

          if (register(name, phone, email, password)) {
            login(phone, password);
          }
        });

      document
        .getElementById("profileForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const name = document.getElementById("profileName").value;
          const email = document.getElementById("profileEmail").value;

          currentCustomer.name = name;
          currentCustomer.email = email;
          customers[currentCustomer.phone] = currentCustomer;

          localStorage.setItem("customers", JSON.stringify(customers));
          localStorage.setItem(
            "currentCustomer",
            JSON.stringify(currentCustomer),
          );

          showMessage("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ğŸ’¾");
        });

      // Auto-refresh orders
      setInterval(() => {
        orders = JSON.parse(localStorage.getItem("orders") || "[]");
        if (
          currentCustomer &&
          !document
            .getElementById("customerDashboard")
            .classList.contains("hidden")
        ) {
          loadCustomerStats();
          loadCustomerOrders();
        }
      }, 30000);
    </script>
  </body>
</html>
